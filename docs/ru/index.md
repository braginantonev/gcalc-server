# Документация gcalc-server

## Оглавление
1. [Возможные ошибки](./possible_errors.md)

## Введение
gcalc-server использует порт из переменной окружения ```PORT```. Если он не найдена, то используется стандартный порт ```8080```. Сервер принимает только POST запросы.

### Добавление выражения
Сервер добавляет выражение из тела запроса в формате ```JSON```.

Пример запроса:
```Bash
curl localhost:<порт>/api/v1/calculate -X POST --header 'Content-Type: application/json' --data '<выражение>'
```

Сервер возвращает `id` номер выражения:
``` JSON
{
    "id": 0
}
```
Возможные статусы ответа:
- 201 - Выражение успешно добавленно
- 422 - Выражение составленно некорректно
- 500 - Внутреняя ошибка сервера

### Проверка статуса выражения
После добавления примера, можно посмотреть статус его выполнения:
``` Bash
curl http://localhost:<port>/api/v1/expressions/<id>
```

``` JSON
{
    "id": 0,
    "status": "in progress"
}
```

Если пример уже был решен, то в ответе будет результат выражения:
``` JSON
{
    "expression": {
        "id": 0,
        "status": "complete",
        "result": 4
    }
}
```

Возможные статусы ответа:
- 200 - Выражение найденно
- 404 - Нет такого выражения
- 500 - Внутреняя ошибка сервера

### Получение списка всех выражений
Для получения списка всех введенных выражений:
``` Bash
curl http://localhost:<port>/api/v1/expressions
```

```JSON
{
    "expressions": [
        {
            "id":0,
            "status": "complete",
            "result": 9
        },
        {
            "id": 1,
            "status": "complete",
            "result": 3
        }
    ]
}
```

Возможные статусы ответа:
- 200 - Успешно получен список выражений
- 500 - Внутреняя ошибка сервера

---
### Создание POST запроса
Для создания POST запроса на сервер, Введите в консоль:
```Bash
curl localhost:<порт>/api/v1/calculate -X POST --header 'Content-Type: application/json' --data '<выражение>'
```
Пример:
```Bash
curl localhost:8080/api/v1/calculate -X POST --header 'Content-Type: application/json' --data '{"expression": "5+4"}'
```
